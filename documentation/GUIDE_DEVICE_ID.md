# How to Find Your RS90 Device ID (Home Assistant)

## What is device_id?

The `device_id` is the **unique Home Assistant identifier** for your RS90 remote.

**It is NOT**:
- ❌ The MQTT ID of the RS90 (e.g., `3d5d95aa3a7f7b20`)
- ❌ The name of the RS90 (e.g., "RS90 Living Room")

**It IS**:
- ✅ The internal Home Assistant identifier (e.g., `6f99751e78b5a07de72d549143e2975c`)

---

## Method 1: Graphical Interface (Recommended)

### In the Services UI

1. Go to **Developer Tools** > **Services**
2. Select the service `haptique_rs90.trigger_macro`
3. Click on the **"RS90 Remote"** field
4. **Select your RS90 from the list** → Home Assistant automatically fills in the `device_id`!

✅ **No need to search for the ID manually!**

---

## Method 2: Via Settings

If you want to see the ID explicitly:

1. Go to **Settings** > **Devices & Services**
2. Click on **Haptique RS90**
3. Click on your remote (e.g., "RS90 Living Room")
4. The URL in your browser contains the device_id:
   ```
   http://homeassistant.local:8123/config/devices/device/6f99751e78b5a07de72d549143e2975c
                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                                          This is the device_id!
   ```

---

## Method 3: Via Template

In **Developer Tools** > **Template**, test:

```yaml
{% for device in integration_entities('haptique_rs90') | map('device_id') | unique | list %}
  {{ device }}
{% endfor %}
```

---

## Using in Services

### ✅ Recommended Method (Graphical Interface)

```yaml
service: haptique_rs90.trigger_macro
data:
  rs90_id: 6f99751e78b5a07de72d549143e2975c  # ← RS90 device ID
  rs90_macro_id: "692eb1561bddd5814022960c"  # ← From sensor.macro_{name}_info attributes
  action: "on"
```

### ✅ Alternative (Device Selector)

```yaml
service: haptique_rs90.trigger_macro
target:
  device_id: 6f99751e78b5a07de72d549143e2975c
data:
  rs90_macro_id: "692eb1561bddd5814022960c"  # ← From sensor.macro_{name}_info attributes
  action: "on"
```

---

## MQTT ID ↔ Home Assistant ID Mapping

| Type | Example | Usage |
|------|---------|-------|
| **MQTT ID** | `3d5d95aa3a7f7b20` | MQTT topics (e.g., `Haptique/3d5d95aa3a7f7b20/status`) |
| **Home Assistant ID** | `6f99751e78b5a07de72d549143e2975c` | HA Services (e.g., `device_id` in services) |

**Important**: 
- The MQTT ID is visible in integration logs
- The Home Assistant ID is generated by Home Assistant when adding the device
- Both are different and **not interchangeable**

---

## FAQ

### Q: Why not use the MQTT ID directly?

A: Home Assistant generates its own ID for each device. This allows managing multiple RS90s with the same firmware, device replacements, etc.

### Q: How to know which RS90 is which if I have multiple?

A: Give clear names during installation:
- ✅ "RS90 Living Room"
- ✅ "RS90 Bedroom"
- ❌ "Haptique RS90 3d5d95aa"

### Q: Does the device_id change?

A: No, it remains fixed as long as you don't delete and recreate the integration.

---

## Summary

**To use Haptique RS90 services**:
1. Open the services interface
2. Select your RS90 from the dropdown menu
3. The device_id is automatically filled ✅

**No need to search for the ID manually!**
